"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/index",{

/***/ "./pages/components/Chats.jsx":
/*!************************************!*\
  !*** ./pages/components/Chats.jsx ***!
  \************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Chats; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_use_websocket__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-use-websocket */ \"./node_modules/react-use-websocket/dist/index.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! crypto */ \"./node_modules/next/dist/compiled/crypto-browserify/index.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var secp256k1__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! secp256k1 */ \"./node_modules/secp256k1/elliptic.js\");\n/* harmony import */ var secp256k1__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(secp256k1__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var eciesjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! eciesjs */ \"./node_modules/eciesjs/dist/index.js\");\n/* harmony import */ var cookies_next__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! cookies-next */ \"./node_modules/cookies-next/lib/index.js\");\n/* harmony import */ var cookies_next__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(cookies_next__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/router */ \"./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_7__);\n/* provided dependency */ var Buffer = __webpack_require__(/*! buffer */ \"./node_modules/buffer/index.js\")[\"Buffer\"];\n\nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\nfunction allStorage() {\n    var values = [], keys = Object.keys(localStorage), i = keys.length;\n    while(i--){\n        if (keys[i] === \"ally-supports-cache\") {\n            continue;\n        }\n        values.push({\n            from: keys[i],\n            data: JSON.parse(localStorage.getItem(keys[i]))\n        });\n    }\n    return values;\n}\nasync function generate() {\n    (async ()=>{\n        // generate privKey\n        let privKey;\n        do {\n            privKey = (0,crypto__WEBPACK_IMPORTED_MODULE_3__.randomBytes)(32);\n        }while (!secp256k1__WEBPACK_IMPORTED_MODULE_4___default().privateKeyVerify(privKey));\n        // get the public key in a compressed format\n        const pubKey = secp256k1__WEBPACK_IMPORTED_MODULE_4___default().publicKeyCreate(privKey);\n        const msg = \"HI\";\n        const hash = (0,crypto__WEBPACK_IMPORTED_MODULE_3__.createHash)(\"sha256\").update(msg).digest(\"hex\");\n        const hashBIn = Uint8Array.from(Buffer.from(hash, \"hex\"));\n        // sign the message\n        const sigObj = secp256k1__WEBPACK_IMPORTED_MODULE_4___default().ecdsaSign(hashBIn, privKey);\n        // sigObj.pub_key = pubKey\n        // sigObj.message = msg\n        let data = {\n            \"signature\": [\n                ...sigObj.signature\n            ],\n            \"recid\": sigObj.recid,\n            \"pub_key\": [\n                ...pubKey\n            ],\n            \"message\": msg\n        };\n        const reqAuth = await fetch(\"http://localhost:8080/login\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(data)\n        });\n        console.log(await reqAuth.json());\n    })();\n}\nasync function getMessages(jwt) {\n    const get = await fetch(\"http://localhost:8080/getMessage\", {\n        headers: {\n            \"AUTHENTICATION\": jwt\n        }\n    });\n    const messages = await get.json();\n    console.log(\"Inside\" + messages);\n    return messages;\n}\nfunction Chats() {\n    _s();\n    let router = (0,next_router__WEBPACK_IMPORTED_MODULE_7__.useRouter)();\n    const [chats, setChats] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [update, setUpdate] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [sentMessage, setSentMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [auth, setAuth] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [pubKey, setPubKey] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [jwt, setJWT] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [socketUrl, setSocketUrl] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"ws://localhost:8080/\");\n    const { sendMessage , lastMessage , readyState  } = (0,react_use_websocket__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(socketUrl);\n    const connectionStatus = {\n        [react_use_websocket__WEBPACK_IMPORTED_MODULE_2__.ReadyState.CONNECTING]: \"Connecting\",\n        [react_use_websocket__WEBPACK_IMPORTED_MODULE_2__.ReadyState.OPEN]: \"Open\",\n        [react_use_websocket__WEBPACK_IMPORTED_MODULE_2__.ReadyState.CLOSING]: \"Closing\",\n        [react_use_websocket__WEBPACK_IMPORTED_MODULE_2__.ReadyState.CLOSED]: \"Closed\",\n        [react_use_websocket__WEBPACK_IMPORTED_MODULE_2__.ReadyState.UNINSTANTIATED]: \"Uninstantiated\"\n    }[readyState];\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!jwt) {\n            let token = (0,cookies_next__WEBPACK_IMPORTED_MODULE_6__.getCookie)(\"jwt\");\n            setJWT(token);\n            if (!token) {\n                localStorage.clear();\n                router.push(\"/\");\n            }\n        }\n        let allChats = allStorage();\n        setChats(allChats);\n        if (lastMessage !== null) {\n            if (lastMessage.data == \"Authenticated\") {\n                setAuth(true);\n                console.log(\"Authenticated with websocket\");\n                (async ()=>{\n                    let msg = await getMessages(jwt);\n                    let pk = (0,cookies_next__WEBPACK_IMPORTED_MODULE_6__.getCookie)(\"private_key\");\n                    console.log(\"Extra meesa\" + msg);\n                    msg.map((value, index)=>{\n                        let data = {\n                            user: value.from,\n                            cipher: (0,eciesjs__WEBPACK_IMPORTED_MODULE_5__.decrypt)(pk, Buffer.from(value.cipher, \"hex\")).toString(\"ascii\"),\n                            receive: true\n                        };\n                        let oldData = JSON.parse(localStorage.getItem(value.from) || \"[]\");\n                        oldData.push(data);\n                        localStorage.setItem(value.from, JSON.stringify(oldData));\n                        let allChats = allStorage();\n                        // delete allChats[\"ally-supports-cache\"]\n                        setChats(allChats);\n                    });\n                })();\n                return;\n            } else if (lastMessage.data == \"Message sent\" || lastMessage.data == \"User offline\") {\n                console.log(\"Success\");\n                let oldData = JSON.parse(localStorage.getItem(sentMessage.user) || \"[]\");\n                oldData.push(sentMessage);\n                localStorage.setItem(sentMessage.user, JSON.stringify(oldData));\n                let allChats = allStorage();\n                // delete allChats[\"ally-supports-cache\"]\n                setChats(allChats);\n                setUpdate(()=>{\n                    return !update;\n                });\n            } else {\n                //User messages\n                try {\n                    let msg = JSON.parse(lastMessage.data);\n                    console.log(\"Hello\" + msg);\n                    if (msg.from) {\n                        let sender = msg.from;\n                        let cipher = msg.cipher;\n                        let privKey = (0,cookies_next__WEBPACK_IMPORTED_MODULE_6__.getCookie)(\"private_key\");\n                        let decryptCipher = (0,eciesjs__WEBPACK_IMPORTED_MODULE_5__.decrypt)(privKey, Buffer.from(cipher, \"hex\")).toString(\"ascii\");\n                        console.log(\"Decrypt \" + decryptCipher);\n                        let data = {\n                            user: sender,\n                            cipher: decryptCipher,\n                            receive: true\n                        };\n                        let oldData = JSON.parse(localStorage.getItem(sender) || \"[]\");\n                        console.log(oldData);\n                        oldData.push(data);\n                        localStorage.setItem(sender, JSON.stringify(oldData));\n                        let allChats = allStorage();\n                        // delete allChats[\"ally-supports-cache\"]\n                        setChats(allChats);\n                        setUpdate(()=>{\n                            return !update;\n                        });\n                    }\n                } catch (e) {}\n            }\n            return;\n        }\n        if (connectionStatus == \"Open\" && !auth && jwt) {\n            sendMessage(JSON.stringify({\n                token: jwt\n            }));\n        }\n    }, [\n        lastMessage,\n        readyState\n    ]);\n    async function sendMess(e) {\n        e.preventDefault();\n        let message = Buffer.from(\"Athul\");\n        let reciever = \"03b04d7af9b2d14bf651354203f0e42e5f31ea36df8a490000c2f93cf5da35f98d\";\n        let encryptData = (0,eciesjs__WEBPACK_IMPORTED_MODULE_5__.encrypt)(reciever, message);\n        console.log(encryptData.toString(\"hex\"));\n        let data = {\n            user: \"03b04d7af9b2d14bf651354203f0e42e5f31ea36df8a490000c2f93cf5da35f98d\",\n            cipher: \"Athul\",\n            receive: false\n        };\n        // localStorage.setItem(sender, JSON.stringify(data))\n        sendMessage(JSON.stringify({\n            cipher: encryptData.toString(\"hex\"),\n            public_key: \"03b04d7af9b2d14bf651354203f0e42e5f31ea36df8a490000c2f93cf5da35f98d\"\n        }));\n        setSentMessage(data);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            style: {\n                height: \"100vh\"\n            },\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    margin: \"20px 100px 0px\",\n                    backgroundColor: \"gray\",\n                    height: \"100%\"\n                },\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        display: \"flex\"\n                    },\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            style: {\n                                width: \"50%\"\n                            },\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: sendMess,\n                                    children: \"Send\"\n                                }, void 0, false, {\n                                    fileName: \"/home/nakamoto/ISM/frontend-chat/pages/components/Chats.jsx\",\n                                    lineNumber: 285,\n                                    columnNumber: 29\n                                }, this),\n                                console.log(chats)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/nakamoto/ISM/frontend-chat/pages/components/Chats.jsx\",\n                            lineNumber: 284,\n                            columnNumber: 25\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                \"Hi\",\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: generate,\n                                    children: \"Send\"\n                                }, void 0, false, {\n                                    fileName: \"/home/nakamoto/ISM/frontend-chat/pages/components/Chats.jsx\",\n                                    lineNumber: 291,\n                                    columnNumber: 29\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/nakamoto/ISM/frontend-chat/pages/components/Chats.jsx\",\n                            lineNumber: 289,\n                            columnNumber: 25\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/nakamoto/ISM/frontend-chat/pages/components/Chats.jsx\",\n                    lineNumber: 281,\n                    columnNumber: 21\n                }, this)\n            }, void 0, false, {\n                fileName: \"/home/nakamoto/ISM/frontend-chat/pages/components/Chats.jsx\",\n                lineNumber: 279,\n                columnNumber: 17\n            }, this)\n        }, void 0, false, {\n            fileName: \"/home/nakamoto/ISM/frontend-chat/pages/components/Chats.jsx\",\n            lineNumber: 277,\n            columnNumber: 13\n        }, this)\n    }, void 0, false);\n}\n_s(Chats, \"bdNK1O/xx/5obWbnrdNMCVT12hk=\", false, function() {\n    return [\n        next_router__WEBPACK_IMPORTED_MODULE_7__.useRouter,\n        react_use_websocket__WEBPACK_IMPORTED_MODULE_2__[\"default\"]\n    ];\n});\n_c = Chats;\nvar _c;\n$RefreshReg$(_c, \"Chats\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBQ0Y7b0JBQUlDLE9BQU87d0JBQUVJLFNBQVM7b0JBQU87O3NDQUcxQiw4REFBQ0w7NEJBQUlDLE9BQU87Z0NBQUVLLE9BQU87NEJBQU07OzhDQUN2Qiw4REFBQ0M7b0NBQU9DLFNBQVNkOzhDQUFVOzs7Ozs7Z0NBQzFCN0MsUUFBUUMsR0FBRyxDQUFDUTs7Ozs7OztzQ0FHakIsOERBQUMwQzs7Z0NBQUk7OENBRUQsOERBQUNPO29DQUFPQyxTQUFTakY7OENBQVU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBV3ZELENBQUM7R0FwTnVCNkI7O1FBRVAzQyxrREFBU0E7UUFZMkJULDJEQUFZQTs7O0tBZHpDb0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vcGFnZXMvY29tcG9uZW50cy9DaGF0cy5qc3g/MzIzNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlV2ViU29ja2V0LCB7IFJlYWR5U3RhdGUgfSBmcm9tICdyZWFjdC11c2Utd2Vic29ja2V0JztcbmltcG9ydCB7IHJhbmRvbUJ5dGVzLCBjcmVhdGVIYXNoIH0gZnJvbSBcImNyeXB0b1wiO1xuaW1wb3J0IHNlY3AyNTZrMSBmcm9tIFwic2VjcDI1NmsxXCJcbmltcG9ydCB7IGVuY3J5cHQsIGRlY3J5cHQsIFByaXZhdGVLZXkgfSBmcm9tICdlY2llc2pzJ1xuaW1wb3J0IHsgZ2V0Q29va2llIH0gZnJvbSAnY29va2llcy1uZXh0JztcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJztcblxuZnVuY3Rpb24gYWxsU3RvcmFnZSgpIHtcblxuICAgIHZhciB2YWx1ZXMgPSBbXSxcbiAgICAgICAga2V5cyA9IE9iamVjdC5rZXlzKGxvY2FsU3RvcmFnZSksXG4gICAgICAgIGkgPSBrZXlzLmxlbmd0aDtcblxuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgaWYgKGtleXNbaV0gPT09IFwiYWxseS1zdXBwb3J0cy1jYWNoZVwiKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgdmFsdWVzLnB1c2goeyBmcm9tOiBrZXlzW2ldLCBkYXRhOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleXNbaV0pKSB9KTtcbiAgICB9XG5cblxuXG4gICAgcmV0dXJuIHZhbHVlcztcbn1cblxuXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZSgpIHtcblxuICAgIChhc3luYyAoKSA9PiB7XG5cbiAgICAgICAgLy8gZ2VuZXJhdGUgcHJpdktleVxuICAgICAgICBsZXQgcHJpdktleVxuICAgICAgICBkbyB7XG4gICAgICAgICAgICBwcml2S2V5ID0gcmFuZG9tQnl0ZXMoMzIpXG4gICAgICAgIH0gd2hpbGUgKCFzZWNwMjU2azEucHJpdmF0ZUtleVZlcmlmeShwcml2S2V5KSlcblxuICAgICAgICAvLyBnZXQgdGhlIHB1YmxpYyBrZXkgaW4gYSBjb21wcmVzc2VkIGZvcm1hdFxuICAgICAgICBjb25zdCBwdWJLZXkgPSBzZWNwMjU2azEucHVibGljS2V5Q3JlYXRlKHByaXZLZXkpXG5cbiAgICAgICAgY29uc3QgbXNnID0gXCJISVwiXG4gICAgICAgIGNvbnN0IGhhc2ggPSBjcmVhdGVIYXNoKCdzaGEyNTYnKS51cGRhdGUobXNnKS5kaWdlc3QoXCJoZXhcIik7XG4gICAgICAgIGNvbnN0IGhhc2hCSW4gPSBVaW50OEFycmF5LmZyb20oQnVmZmVyLmZyb20oaGFzaCwgJ2hleCcpKTtcbiAgICAgICAgLy8gc2lnbiB0aGUgbWVzc2FnZVxuICAgICAgICBjb25zdCBzaWdPYmogPSBzZWNwMjU2azEuZWNkc2FTaWduKGhhc2hCSW4sIHByaXZLZXkpXG4gICAgICAgIC8vIHNpZ09iai5wdWJfa2V5ID0gcHViS2V5XG4gICAgICAgIC8vIHNpZ09iai5tZXNzYWdlID0gbXNnXG4gICAgICAgIGxldCBkYXRhID0geyBcInNpZ25hdHVyZVwiOiBbLi4uc2lnT2JqLnNpZ25hdHVyZV0sIFwicmVjaWRcIjogc2lnT2JqLnJlY2lkLCBcInB1Yl9rZXlcIjogWy4uLnB1YktleV0sIFwibWVzc2FnZVwiOiBtc2cgfTtcblxuXG4gICAgICAgIGNvbnN0IHJlcUF1dGggPSBhd2FpdCBmZXRjaChcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9sb2dpblwiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc29sZS5sb2coYXdhaXQgcmVxQXV0aC5qc29uKCkpXG5cblxuICAgIH0pKClcblxufVxuXG5cblxuYXN5bmMgZnVuY3Rpb24gZ2V0TWVzc2FnZXMoand0KSB7XG5cbiAgICBjb25zdCBnZXQgPSBhd2FpdCBmZXRjaChcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9nZXRNZXNzYWdlXCIsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJBVVRIRU5USUNBVElPTlwiOiBqd3RcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgbWVzc2FnZXMgPSBhd2FpdCBnZXQuanNvbigpO1xuICAgIGNvbnNvbGUubG9nKFwiSW5zaWRlXCIgKyBtZXNzYWdlcylcbiAgICByZXR1cm4gbWVzc2FnZXNcblxuXG5cblxuXG59XG5cblxuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENoYXRzKCkge1xuXG4gICAgbGV0IHJvdXRlciA9IHVzZVJvdXRlcigpXG5cbiAgICBjb25zdCBbY2hhdHMsIHNldENoYXRzXSA9IHVzZVN0YXRlKFwiXCIpXG4gICAgY29uc3QgW3VwZGF0ZSwgc2V0VXBkYXRlXSA9IHVzZVN0YXRlKDApO1xuICAgIGNvbnN0IFtzZW50TWVzc2FnZSwgc2V0U2VudE1lc3NhZ2VdID0gdXNlU3RhdGUoXCJcIilcbiAgICBjb25zdCBbYXV0aCwgc2V0QXV0aF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgW3B1YktleSwgc2V0UHViS2V5XSA9IHVzZVN0YXRlKFwiXCIpO1xuICAgIGNvbnN0IFtqd3QsIHNldEpXVF0gPSB1c2VTdGF0ZShcIlwiKVxuXG4gICAgY29uc3QgW3NvY2tldFVybCwgc2V0U29ja2V0VXJsXSA9IHVzZVN0YXRlKCd3czovL2xvY2FsaG9zdDo4MDgwLycpO1xuXG5cbiAgICBjb25zdCB7IHNlbmRNZXNzYWdlLCBsYXN0TWVzc2FnZSwgcmVhZHlTdGF0ZSB9ID0gdXNlV2ViU29ja2V0KHNvY2tldFVybCk7XG5cbiAgICBjb25zdCBjb25uZWN0aW9uU3RhdHVzID0ge1xuICAgICAgICBbUmVhZHlTdGF0ZS5DT05ORUNUSU5HXTogJ0Nvbm5lY3RpbmcnLFxuICAgICAgICBbUmVhZHlTdGF0ZS5PUEVOXTogJ09wZW4nLFxuICAgICAgICBbUmVhZHlTdGF0ZS5DTE9TSU5HXTogJ0Nsb3NpbmcnLFxuICAgICAgICBbUmVhZHlTdGF0ZS5DTE9TRURdOiAnQ2xvc2VkJyxcbiAgICAgICAgW1JlYWR5U3RhdGUuVU5JTlNUQU5USUFURURdOiAnVW5pbnN0YW50aWF0ZWQnLFxuICAgIH1bcmVhZHlTdGF0ZV07XG5cblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG5cbiAgICAgICAgaWYgKCFqd3QpIHtcbiAgICAgICAgICAgIGxldCB0b2tlbiA9IGdldENvb2tpZShcImp3dFwiKVxuICAgICAgICAgICAgc2V0SldUKHRva2VuKVxuICAgICAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpXG4gICAgICAgICAgICAgICAgcm91dGVyLnB1c2goXCIvXCIpXG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IGFsbENoYXRzID0gYWxsU3RvcmFnZSgpXG5cbiAgICAgICAgc2V0Q2hhdHMoYWxsQ2hhdHMpXG5cbiAgICAgICAgaWYgKGxhc3RNZXNzYWdlICE9PSBudWxsKSB7XG5cbiAgICAgICAgICAgIGlmIChsYXN0TWVzc2FnZS5kYXRhID09IFwiQXV0aGVudGljYXRlZFwiKSB7XG4gICAgICAgICAgICAgICAgc2V0QXV0aCh0cnVlKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXV0aGVudGljYXRlZCB3aXRoIHdlYnNvY2tldFwiKTtcblxuICAgICAgICAgICAgICAgIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtc2cgPSBhd2FpdCBnZXRNZXNzYWdlcyhqd3QpXG4gICAgICAgICAgICAgICAgICAgIGxldCBwayA9IGdldENvb2tpZShcInByaXZhdGVfa2V5XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkV4dHJhIG1lZXNhXCIgKyBtc2cpXG4gICAgICAgICAgICAgICAgICAgIG1zZy5tYXAoKHZhbHVlLCBpbmRleCkgPT4ge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyOiB2YWx1ZS5mcm9tLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNpcGhlcjogZGVjcnlwdChwaywgQnVmZmVyLmZyb20odmFsdWUuY2lwaGVyLCBcImhleFwiKSkudG9TdHJpbmcoXCJhc2NpaVwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvbGREYXRhID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh2YWx1ZS5mcm9tKSB8fCBcIltdXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb2xkRGF0YS5wdXNoKGRhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh2YWx1ZS5mcm9tLCBKU09OLnN0cmluZ2lmeShvbGREYXRhKSlcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYWxsQ2hhdHMgPSBhbGxTdG9yYWdlKClcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIGFsbENoYXRzW1wiYWxseS1zdXBwb3J0cy1jYWNoZVwiXVxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q2hhdHMoYWxsQ2hhdHMpXG5cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KSgpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChsYXN0TWVzc2FnZS5kYXRhID09IFwiTWVzc2FnZSBzZW50XCIgfHwgbGFzdE1lc3NhZ2UuZGF0YSA9PSBcIlVzZXIgb2ZmbGluZVwiKSB7XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlN1Y2Nlc3NcIilcbiAgICAgICAgICAgICAgICBsZXQgb2xkRGF0YSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oc2VudE1lc3NhZ2UudXNlcikgfHwgXCJbXVwiKTtcbiAgICAgICAgICAgICAgICBvbGREYXRhLnB1c2goc2VudE1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oc2VudE1lc3NhZ2UudXNlciwgSlNPTi5zdHJpbmdpZnkob2xkRGF0YSkpXG5cblxuXG4gICAgICAgICAgICAgICAgbGV0IGFsbENoYXRzID0gYWxsU3RvcmFnZSgpXG5cbiAgICAgICAgICAgICAgICAvLyBkZWxldGUgYWxsQ2hhdHNbXCJhbGx5LXN1cHBvcnRzLWNhY2hlXCJdXG4gICAgICAgICAgICAgICAgc2V0Q2hhdHMoYWxsQ2hhdHMpXG5cbiAgICAgICAgICAgICAgICBzZXRVcGRhdGUoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXVwZGF0ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgLy9Vc2VyIG1lc3NhZ2VzXG4gICAgICAgICAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgbXNnID0gSlNPTi5wYXJzZShsYXN0TWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJIZWxsb1wiICsgbXNnKVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChtc2cuZnJvbSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2VuZGVyID0gbXNnLmZyb207XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2lwaGVyID0gbXNnLmNpcGhlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwcml2S2V5ID0gZ2V0Q29va2llKFwicHJpdmF0ZV9rZXlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkZWNyeXB0Q2lwaGVyID0gZGVjcnlwdChwcml2S2V5LCBCdWZmZXIuZnJvbShjaXBoZXIsIFwiaGV4XCIpKS50b1N0cmluZyhcImFzY2lpXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRlY3J5cHQgXCIgKyBkZWNyeXB0Q2lwaGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcjogc2VuZGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNpcGhlcjogZGVjcnlwdENpcGhlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvbGREYXRhID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzZW5kZXIpIHx8IFwiW11cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhvbGREYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgb2xkRGF0YS5wdXNoKGRhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShzZW5kZXIsIEpTT04uc3RyaW5naWZ5KG9sZERhdGEpKVxuXG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFsbENoYXRzID0gYWxsU3RvcmFnZSgpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBhbGxDaGF0c1tcImFsbHktc3VwcG9ydHMtY2FjaGVcIl1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldENoYXRzKGFsbENoYXRzKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRVcGRhdGUoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhdXBkYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcblxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cblxuICAgICAgICBpZiAoY29ubmVjdGlvblN0YXR1cyA9PSBcIk9wZW5cIiAmJiAhYXV0aCAmJiBqd3QpIHtcblxuICAgICAgICAgICAgc2VuZE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoeyB0b2tlbjogand0IH0pKTtcblxuXG4gICAgICAgIH1cblxuXG5cblxuXG4gICAgfSwgW2xhc3RNZXNzYWdlLCByZWFkeVN0YXRlXSk7XG5cblxuXG4gICAgYXN5bmMgZnVuY3Rpb24gc2VuZE1lc3MoZSkge1xuXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICBsZXQgbWVzc2FnZSA9IEJ1ZmZlci5mcm9tKFwiQXRodWxcIik7XG4gICAgICAgIGxldCByZWNpZXZlciA9IFwiMDNiMDRkN2FmOWIyZDE0YmY2NTEzNTQyMDNmMGU0MmU1ZjMxZWEzNmRmOGE0OTAwMDBjMmY5M2NmNWRhMzVmOThkXCI7XG4gICAgICAgIGxldCBlbmNyeXB0RGF0YSA9IGVuY3J5cHQocmVjaWV2ZXIsIG1lc3NhZ2UpXG4gICAgICAgIGNvbnNvbGUubG9nKGVuY3J5cHREYXRhLnRvU3RyaW5nKFwiaGV4XCIpKVxuXG4gICAgICAgIGxldCBkYXRhID0ge1xuICAgICAgICAgICAgdXNlcjogXCIwM2IwNGQ3YWY5YjJkMTRiZjY1MTM1NDIwM2YwZTQyZTVmMzFlYTM2ZGY4YTQ5MDAwMGMyZjkzY2Y1ZGEzNWY5OGRcIixcbiAgICAgICAgICAgIGNpcGhlcjogXCJBdGh1bFwiLFxuICAgICAgICAgICAgcmVjZWl2ZTogZmFsc2VcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oc2VuZGVyLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgICAgICAgc2VuZE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoeyBjaXBoZXI6IGVuY3J5cHREYXRhLnRvU3RyaW5nKFwiaGV4XCIpLCBwdWJsaWNfa2V5OiBcIjAzYjA0ZDdhZjliMmQxNGJmNjUxMzU0MjAzZjBlNDJlNWYzMWVhMzZkZjhhNDkwMDAwYzJmOTNjZjVkYTM1Zjk4ZFwiIH0pKVxuXG4gICAgICAgIHNldFNlbnRNZXNzYWdlKGRhdGEpXG5cblxuICAgIH1cblxuXG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8PlxuICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBoZWlnaHQ6IFwiMTAwdmhcIiB9fT5cblxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luOiBcIjIwcHggMTAwcHggMHB4XCIsIGJhY2tncm91bmRDb2xvcjogXCJncmF5XCIsIGhlaWdodDogXCIxMDAlXCIgfX0+XG5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiBcImZsZXhcIiB9fT5cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHdpZHRoOiBcIjUwJVwiIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17c2VuZE1lc3N9PlNlbmQ8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y29uc29sZS5sb2coY2hhdHMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSGlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2dlbmVyYXRlfT5TZW5kPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8Lz5cbiAgICApXG59Il0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsInVzZVdlYlNvY2tldCIsIlJlYWR5U3RhdGUiLCJyYW5kb21CeXRlcyIsImNyZWF0ZUhhc2giLCJzZWNwMjU2azEiLCJlbmNyeXB0IiwiZGVjcnlwdCIsIlByaXZhdGVLZXkiLCJnZXRDb29raWUiLCJ1c2VSb3V0ZXIiLCJhbGxTdG9yYWdlIiwidmFsdWVzIiwia2V5cyIsIk9iamVjdCIsImxvY2FsU3RvcmFnZSIsImkiLCJsZW5ndGgiLCJwdXNoIiwiZnJvbSIsImRhdGEiLCJKU09OIiwicGFyc2UiLCJnZXRJdGVtIiwiZ2VuZXJhdGUiLCJwcml2S2V5IiwicHJpdmF0ZUtleVZlcmlmeSIsInB1YktleSIsInB1YmxpY0tleUNyZWF0ZSIsIm1zZyIsImhhc2giLCJ1cGRhdGUiLCJkaWdlc3QiLCJoYXNoQkluIiwiVWludDhBcnJheSIsIkJ1ZmZlciIsInNpZ09iaiIsImVjZHNhU2lnbiIsInNpZ25hdHVyZSIsInJlY2lkIiwicmVxQXV0aCIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJzdHJpbmdpZnkiLCJjb25zb2xlIiwibG9nIiwianNvbiIsImdldE1lc3NhZ2VzIiwiand0IiwiZ2V0IiwibWVzc2FnZXMiLCJDaGF0cyIsInJvdXRlciIsImNoYXRzIiwic2V0Q2hhdHMiLCJzZXRVcGRhdGUiLCJzZW50TWVzc2FnZSIsInNldFNlbnRNZXNzYWdlIiwiYXV0aCIsInNldEF1dGgiLCJzZXRQdWJLZXkiLCJzZXRKV1QiLCJzb2NrZXRVcmwiLCJzZXRTb2NrZXRVcmwiLCJzZW5kTWVzc2FnZSIsImxhc3RNZXNzYWdlIiwicmVhZHlTdGF0ZSIsImNvbm5lY3Rpb25TdGF0dXMiLCJDT05ORUNUSU5HIiwiT1BFTiIsIkNMT1NJTkciLCJDTE9TRUQiLCJVTklOU1RBTlRJQVRFRCIsInRva2VuIiwiY2xlYXIiLCJhbGxDaGF0cyIsInBrIiwibWFwIiwidmFsdWUiLCJpbmRleCIsInVzZXIiLCJjaXBoZXIiLCJ0b1N0cmluZyIsInJlY2VpdmUiLCJvbGREYXRhIiwic2V0SXRlbSIsInNlbmRlciIsImRlY3J5cHRDaXBoZXIiLCJlIiwic2VuZE1lc3MiLCJwcmV2ZW50RGVmYXVsdCIsIm1lc3NhZ2UiLCJyZWNpZXZlciIsImVuY3J5cHREYXRhIiwicHVibGljX2tleSIsImRpdiIsInN0eWxlIiwiaGVpZ2h0IiwibWFyZ2luIiwiYmFja2dyb3VuZENvbG9yIiwiZGlzcGxheSIsIndpZHRoIiwiYnV0dG9uIiwib25DbGljayJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./pages/components/Chats.jsx\n"));

/***/ })

});